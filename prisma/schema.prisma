// Configuração do Banco
datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

// --- Modelos ---

model User {
  id        String    @id @default(uuid())
  email     String    @unique
  name      String
  password  String
  phone     String?
  role      Role      @default(CUSTOMER) // Admin ou Cliente
  cars      Car[]
  bookings  Booking[]
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

enum Role {
  ADMIN
  CUSTOMER
}

model Car {
  id       String    @id @default(uuid())
  brand    String // Marca
  model    String // Modelo
  plate    String    @unique // Placa
  ownerId  String
  owner    User      @relation(fields: [ownerId], references: [id])
  bookings Booking[]
}

model Service {
  id          String    @id @default(uuid())
  name        String // Ex: Lavagem Simples, Polimento
  description String?
  price       Decimal
  duration    Int // Tempo estimado em minutos
  bookings    Booking[]
}

model Booking {
  id     String   @id @default(uuid())
  date   DateTime // Data e hora do agendamento
  status Status   @default(PENDING)

  userId String
  user   User   @relation(fields: [userId], references: [id])

  carId String
  car   Car    @relation(fields: [carId], references: [id])

  serviceId String
  service   Service @relation(fields: [serviceId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum Status {
  PENDING
  CONFIRMED
  COMPLETED
  CANCELLED
}
